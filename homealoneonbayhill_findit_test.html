<!DOCTYPE html>
<html lang="en"> 
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home Alone Scavenger Hunt</title>
    <!-- Prevent caching -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js"></script>

    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: url('AdobeStock_375652874.jpeg?nocache=12345') no-repeat center center fixed; /* Add cache-busting query */
            background-size: cover;
        }
        .container {
            max-width: 600px;
            margin: 20px auto;
            padding: 20px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .logo {
            text-align: center;
            margin-bottom: 0px;
	        padding-bottom: 0px;
	        border-bottom: 3px solid darkgreen;
        }
        .logo img {
            max-width: 100%;
            height: auto;
        }
        .item {
            display: flex;
            justify-content: space-between;
            align-items: center;
	        font-size: 20pt;
	        color: darkred;
            margin: 10px 0;
	        margin-bottom: 0px;
	        padding-bottom: 0px;
        }
	    input.item-checkbox {
	        width: 20px;
            height: 20px;
        }
        .points {
            font-weight: bold;
        }
        .total {
            text-align: center;
            margin-top: 20px;
            font-size: 18px;
            font-weight: bold;
        }
        /* Celebration pop-up box */
        .celebration {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            width: 90%;
            max-width: 600px;
            height: auto;
            max-height: 75%;
            transform: translate(-50%, -50%);
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
            z-index: 1000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
            overflow: hidden;
        }
        .celebration img {
            max-width: 100%;
            height: auto;
            margin-bottom: 20px;
        }
        .celebration h2 {
            font-size: 1.5em;
            margin: 10px 0;
        }
        .close-btn {
            background-color: darkgreen;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }
        .close-btn:hover {
            background-color: #4caf50;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="logo">
            <img src="IMG_5930.PNG?nocache=12345" alt="Logo"> <!-- Cache-busting query added -->
        </div>
        <h1 style="color:#6C886B;font-weight:normal;font-size:30px;padding-top:0px;margin-top:0px;padding-bottom:0px;margin-bottom:0px;">Search & Find</h1>
        <form id="huntForm">
            <!-- Scavenger hunt items -->
            <div class="item">
                <label>
                    <input type="checkbox" class="item-checkbox" data-points="12">
                    Kevin's Sled
                </label>
                <span class="points">12 pts</span>
            </div>
            <div class="item">
                <label>
                    <input type="checkbox" class="item-checkbox" data-points="9">
                    Paint Cans
                </label>
                <span class="points">9 pts</span>
            </div>
            <div class="item">
                <label>
                    <input type="checkbox" class="item-checkbox" data-points="9">
                    Buzz's Girlfriend
                </label>
                <span class="points">9 pts</span>
            </div>
            <div class="item">
                <label>
                    <input type="checkbox" class="item-checkbox" data-points="12">
                    Kevin's Toboggan
                </label>
                <span class="points">12 pts</span>
            </div>
            <div class="item">
                <label>
                    <input type="checkbox" class="item-checkbox" data-points="9">
                    Michael Jordan
                </label>
                <span class="points">9 pts</span>
            </div>
            <div class="item">
                <label>
                    <input type="checkbox" class="item-checkbox" data-points="9">
                    Santa Wreaths
                </label>
                <span class="points">9 pts</span>
            </div>
            <div class="item">
                <label>
                    <input type="checkbox" class="item-checkbox" data-points="7">
                    Electric Coil Heater
                </label>
                <span class="points">7 pts</span>
            </div>
            <div class="item">
                <label>
                    <input type="checkbox" class="item-checkbox" data-points="12">
                    Fuller's Pepsi
                </label>
                <span class="points">12 pts</span>
            </div>
            <div class="item">
                <label>
                    <input type="checkbox" class="item-checkbox" data-points="5">
                    Lawn Jockey Statue
                </label>
                <span class="points">5 pts</span>
            </div>
            <div class="item">
                <label>
                    <input type="checkbox" class="item-checkbox" data-points="7">
                    Buzz's Spider
                </label>
                <span class="points">7 pts</span>
            </div>
            <div class="item">
                <label>
                    <input type="checkbox" class="item-checkbox" data-points="9">
                    Crunch Tater Bag
                </label>
                <span class="points">9 pts</span>
            </div>
        </form>
        <div class="total">
            Total Points: <span id="totalPoints">0</span>
        </div>
    </div>

    <!-- Celebration pop-up -->
    <div class="celebration" id="celebration">
        <!-- The image and content will be dynamically added -->
        <h2 id="celebration-text">Congratulations! You Found Them All!</h2>
        <button class="close-btn" id="closeBtn">Close</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

	    const firebaseAppScript = document.querySelector('script[src*="firebase-app.js"]');
            const firebaseFirestoreScript = document.querySelector('script[src*="firebase-firestore.js"]');

	if (firebaseAppScript) {
                alert("Firebase App script is present in the DOM.");
            } else {
                alert("Firebase App script NOT present in the DOM.");
            }

            if (firebaseFirestoreScript) {
                alert("Firebase Firestore script is present in the DOM.");
            } else {
                alert("Firebase Firestore script NOT present in the DOM.");
            }
	});


	// Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDQTw4RqLlkwKQX5iP2ECyyAcHDX5jkE-w",
            authDomain: "homealoneonbayhilldb.firebaseapp.com",
            projectId: "homealoneonbayhilldb",
            storageBucket: "homealoneonbayhilldb.firebasestorage.app",
            messagingSenderId: "672910292649",
            appId: "1:672910292649:web:88485b76fa6bcd08295bb8"
        };

	try {
            console.log("Initializing Firebase...");
            alert("Initializing Firebase...");
            const app = firebase.initializeApp(firebaseConfig);
            alert("Firebase initialized successfully!");
            const db = firebase.firestore();
            console.log("Firestore initialized successfully!");
        } catch (error) {
            console.error("Error initializing Firebase:", error);
            alert("Error initializing Firebase: " + error.message);
        }


	document.addEventListener('DOMContentLoaded', async () => {
            const checkboxes = document.querySelectorAll('.item-checkbox');
            const totalPointsEl = document.getElementById('totalPoints');
            const celebrationDiv = document.getElementById('celebration');
            const closeBtn = document.getElementById('closeBtn');
            const celebrationText = document.getElementById('celebration-text');

            let totalPoints = 0;

            // Dynamically add the celebration image
            const celebrationImage = document.createElement('img');
            celebrationImage.src = 'kevin_celebration.gif?nocache=12345'; // Cache-busting query added
            celebrationImage.alt = 'Celebration';
            celebrationImage.style.display = 'block';
            celebrationImage.style.margin = '0 auto';
            celebrationDiv.insertBefore(celebrationImage, celebrationText);

            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('change', () => {
                    totalPoints = 0;
                    checkboxes.forEach(cb => {
                        if (cb.checked) {
                            totalPoints += parseInt(cb.dataset.points, 10);
                        }
                    });
                    totalPointsEl.textContent = totalPoints;

                    if (totalPoints === 100) {
                        celebrationDiv.style.display = 'flex';
                    }
                });
            });

            closeBtn.addEventListener('click', () => {
                celebrationDiv.style.display = 'none';
            });

            celebrationDiv.style.display = 'none';
        });
    </script>
</body>
</html>